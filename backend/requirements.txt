# =============================================================================
# Intelligent Traffic Management System - Backend Requirements
# CPU-optimized dependencies (no CUDA)
# =============================================================================
# Last Updated: January 3, 2026
# Python Version: 3.11+ (Tested with 3.12)
# =============================================================================

# --- Core Web Framework ---
fastapi==0.115.6
uvicorn[standard]==0.32.1
python-multipart==0.0.18
aiofiles==24.1.0
sse-starlette==2.1.3
websockets==15.0.1

# --- Computer Vision & ML (CPU) ---
ultralytics>=8.3.40
opencv-python==4.10.0.84
numpy>=1.24.0,<2.0.0

# --- PyTorch CPU-only (Install separately AFTER requirements.txt) ---
# IMPORTANT: Run this command AFTER installing requirements.txt:
# pip install torch==2.2.0+cpu torchvision==0.17.0+cpu --index-url https://download.pytorch.org/whl/cpu
# DO NOT add torch to requirements.txt (conflicts with CPU-only installation)

# --- Object Tracking (DeepSORT) ---
# Note: Uses built-in tracking from ultralytics

# --- OCR (License Plate Recognition) ---
easyocr==1.7.1
# Note: EasyOCR will auto-install: opencv-python-headless, Pillow, scipy, scikit-image

# --- Video Download & Processing ---
yt-dlp==2024.12.6

# --- Fuzzy Logic (Traffic Signal Control) ---
scikit-fuzzy==0.5.0
# Note: scikit-fuzzy will auto-install: networkx, scikit-image

# --- Text-to-Speech (Voice Warnings) ---
edge-tts==6.1.19
pyttsx3==2.98

# --- Database ---
aiosqlite==0.20.0
# Note: For production, consider PostgreSQL with asyncpg

# --- Authentication ---
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4

# --- Utilities ---
pydantic>=2.10.3
pydantic-settings==2.6.1
python-dotenv==1.0.1

# --- Testing ---
pytest==8.3.4
pytest-asyncio==0.24.0
httpx==0.28.1

# =============================================================================
# Auto-installed Dependencies (FYI - no action needed)
# =============================================================================
# These are automatically installed by the packages above:
# - Pillow (from easyocr) - Image processing
# - scipy (from easyocr, scikit-fuzzy) - Scientific computing
# - scikit-image (from easyocr, scikit-fuzzy) - Image processing
# - networkx (from scikit-fuzzy) - Graph algorithms
# - requests (from multiple packages) - HTTP client
# - PyYAML (from ultralytics) - YAML parser
# - matplotlib (from ultralytics) - Plotting
# - pandas (from ultralytics) - Data analysis
# - seaborn (from ultralytics) - Statistical visualization
# =============================================================================

# =============================================================================
# Installation Instructions
# =============================================================================
# 1. Create virtual environment: python -m venv .venv
# 2. Activate: .\.venv\Scripts\Activate.ps1 (Windows) or source .venv/bin/activate (Linux/Mac)
# 3. Upgrade pip: python -m pip install --upgrade pip
# 4. Install requirements: pip install -r requirements.txt
# 5. Install PyTorch CPU: pip install torch==2.2.0+cpu torchvision==0.17.0+cpu --index-url https://download.pytorch.org/whl/cpu
# 6. Verify installation: python check_db.py
# =============================================================================
